// Generated by CoffeeScript 1.7.1
var Game;

Game = require('./../../game');

if (Game.Screen == null) {
  Game.Screen = {};
}

Game.Screen.lookScreen = new Game.Screen.TargetBasedScreen({
  captionFunction: function(x, y) {
    var entity, item, items, map, z;
    z = this._player.getZ();
    map = this._player.getMap();
    if (map.isExplored(x, y, z)) {
      if (this._visibleCells[x + "," + y]) {
        items = map.getItemsAt(x, y, z);
        if (items) {
          item = items[items.length - 1];
          return String.format("%s - %s (%s)", item.getRepresentation(), item.describeA(true), item.details());
        } else if (map.getEntityAt(x, y, z)) {
          entity = map.getEntityAt(x, y, z);
          return String.format("%s - %s (%s)", entity.getRepresentation(), entity.describeA(true), entity.details());
        }
      }
      return String.format("%s - %s", map.getTile(x, y, z).getRepresentation(), map.getTile(x, y, z).getDescription());
    } else {
      return String.format("%s - %s", Game.Tile.nullTile.getRepresentation(), Game.Tile.nullTile.getDescription());
    }
  }
});
