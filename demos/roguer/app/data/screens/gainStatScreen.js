// Generated by CoffeeScript 1.7.1
var Game;

Game = require('./../../game');

if (Game.Screen == null) {
  Game.Screen = {};
}

Game.Screen.gainStatScreen = {
  setup: function(entity) {
    this._entity = entity;
    return this._options = entity.getStatOptions();
  },
  render: function(display) {
    var i, letters;
    letters = "abcdefghijklmnopqrstuvwxyz";
    display.drawText(0, 0, "Choose a stat to increase: ");
    i = 0;
    while (i < this._options.length) {
      display.drawText(0, 2 + i, letters.substring(i, i + 1) + " - " + this._options[i][0]);
      i++;
    }
    return display.drawText(0, 4 + this._options.length, "Remaining points: " + this._entity.getStatPoints());
  },
  handleInput: function(inputType, inputData) {
    var index;
    if (inputType === "keydown") {
      if (inputData.keyCode >= ROT.VK_A && inputData.keyCode <= ROT.VK_Z) {
        index = inputData.keyCode - ROT.VK_A;
        if (this._options[index]) {
          this._options[index][1].call(this._entity);
          this._entity.setStatPoints(this._entity.getStatPoints() - 1);
          if (this._entity.getStatPoints() === 0) {
            return Game.Screen.playScreen.setSubScreen(undefined);
          } else {
            return Game.refresh();
          }
        }
      }
    }
  }
};
